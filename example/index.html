<html>
<head>
<script type="text/javascript" src="/node_modules/jquery/dist/jquery.js"></script>
<script type="text/javascript" src="/dist/javascripts/chariot.js"></script>
<link rel="stylesheet" type="text/css" href="/dist/stylesheets/chariot.css">

<style>
  body {
    background: black;
  }
	.outer {
		position: relative;
		top: 30%;
		left: 30%;
		z-index: 3;
		width: 500px;
		height: 500px;
		background: red;
	}
	.inner {
    float: left;
	 	width: 250px;
		height: 250px;

	}
  .inner button {
    padding: 20px;
    width: 100px;
    height: 100px;
  }
  .top-left {
    background: blue;
  }
  .top-right {
    background: yellow;
  }
  .bottom-left {
    background: pink;
  }
</style>

</head>

<body>
  <div><a href="#" class="add-history-link">1. Add history</a></div>
  <div><a href="#" class="start-tutorial-link">2. Start tutorial without URL change</a></div>
<div class='outer'>
  <div class="inner top-left"><button>Top Left</button></div>
  <div class="inner top-right"><button>Top Right</button></div>
  <div class="inner bottom-left"><button>Bottom Left</button></div>
</div>

<script>

var delegate = this;

var chariot = new Chariot({
  ticketing: {
    steps: [
      // Step #1 illustrates the basic content of a tooltip
      {
        selectors: {
          topLeft: ".top-left",
        },
        tooltip: {
          position: 'bottom', // 'top' | 'left' | 'bottom' | 'right'
          title: 'Know your customer',
          text: 'Find out who sent the ticket. Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.Find out who sent the ticket.',
          // anchorElement: "topLeft",
          iconUrl: '/assets/images/agent@2x.png',
          attr: { 'id': 'know_your_customer', 'data-track-id': 'know_your_customer' },
          arrowLength: 20
        },
      },
      // Step #2 illustrates the ability to highlight select two selectors
      {
        selectors: {
          topRight: ".top-right",
          bottomLeft: ".bottom-left"
        },
        tooltip: {
          position: 'top',
          title: 'Tooltip #2',
          text: 'Two selectors being highlighted.',
          // xOffset: -50,
          anchorElement: "topRight",
        }
      },
      // This step illustrates how a tooltip can be offset
      {
        selectors: {
          bottomLeft: ".bottom-left",
        },
        tooltip: {
          position: 'right',
          title: 'Tooltip #3',
          text: 'Placeholder text.',
          // anchorElement: "bottomLeft",
          yOffset: 50,
          xOffset: 20,
        }
      },
      /*
      // This step shows how a missing selector will cause a tutorial to end
      {
        selectors: {
          bottomLeft: ".bottom-left",
          notExistent: ".where-am-i"
        },
        tooltip: {
          position: 'bottom',
          title: 'Tooltip #3',
          text: 'Placeholder text.',
          anchorElement: "bottomLeft",
          cta: 'Next',
          subtext: function(currentStep, totalSteps) {
            return `${currentStep} of ${totalSteps}`;
          }
        }
      },
      // This step is skipped entirely because of the last step
      {
        selectors: {
          topRight: ".top-right"
        },
        tooltip: {
          position: 'left',
          title: 'Tooltip #4',
          text: 'This tooltip is skipped because tooltip #3 config had an invalid selector.',
          anchorElement: "topRight",
          cta: 'Next',
          subtext: function(currentStep, totalSteps) {
            return `${currentStep} of ${totalSteps}`;
          }
        }
      }
      */
    ],
    // shouldOverlay: false,
    onComplete: function() {
      console.log('onComplete called from configuration');
    },
    compatibilityMode: true
  }
}, delegate);

function sleepFor(sleepDuration){
  var now = new Date().getTime();
  while(new Date().getTime() < now + sleepDuration){ /* do nothing */ }
}

function willBeginTutorial(tutorial) {
  console.log("delegate - willBeginTutorial\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("willBeginTutorial promise resolved");
  });
}
function willBeginStep(step, stepIndex, tutorial) {
  console.log("delegate - willBeginStep\n  step:" + step + "\n  stepIndex:" + stepIndex + "\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("willBeginStep promise resolved");
  });
}
function willShowOverlay(overlay, stepIndex, tutorial) {
  console.log("delegate - willShowOverlay\n  overlay:" + overlay + "\n  stepIndex:" + stepIndex + "\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("willShowOverlay promise resolved");
  });
}
function didShowOverlay(overlay, stepIndex, tutorial) {
  console.log("delegate - didShowOverlay\n  overlay:" + overlay + "\n  stepIndex:" + stepIndex + "\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("didShowOverlay promise resolved");
  });
}
function willRenderTooltip(tooltip, stepIndex, tutorial) {
  console.log("delegate - willRenderTooltip\n  tooltip:" + tooltip + "\n  stepIndex:" + stepIndex + "\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("willRenderTooltip promise resolved");
  });
}
function didRenderTooltip(tooltip, stepIndex, tutorial) {
  console.log("delegate - didRenderTooltip\n  tooltip:" + tooltip + "\n  stepIndex:" + stepIndex + "\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("didRenderTooltip promise resolved");
  });
}
function didFinishStep(step, stepIndex, tutorial) {
  console.log("delegate - didFinishStep\n  step:" + step + "\n  stepIndex:" + stepIndex + "\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("didFinishStep promise resolved");
  });
}
function didFinishTutorial(tutorial) {
  console.log("delegate - didFinishTutorial\n  tutorial:" + tutorial);
  return Promise.resolve().then(() => {
    sleepFor(1000);
    console.log("didFinishTutorial promise resolved");
  });
}

$(function() {
  $('.add-history-link').click(function() {
    history.pushState({}, "page 2", "index.html?tutorial=ticketing");
  });

  $('.start-tutorial-link').click(function() {
    chariot.startTutorial('ticketing');
  });
});
</script>
</body>


</html>
